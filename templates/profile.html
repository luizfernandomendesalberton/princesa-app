{% extends "base.html" %}

{% block title %}Perfil & ConfiguraÃ§Ãµes - Princesa App{% endblock %}

{% block styles %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/profile.css') }}">
{% endblock %}

{% block content %}
<div class="container">
    <div class="profile-container">
        <div class="profile-header">
            <h1>ğŸ‘‘ Meu Perfil</h1>
            <p>Configure seu email para receber notificaÃ§Ãµes lindas!</p>
        </div>

        <div class="current-info">
            <h4>ğŸ“‹ InformaÃ§Ãµes Atuais</h4>
            <div class="info-item">
                <span><strong>ğŸ‘¤ Nome:</strong></span>
                <span>{{ session.name }}</span>
            </div>
            <div class="info-item">
                <span><strong>ğŸ”‘ UsuÃ¡rio:</strong></span>
                <span>{{ session.username }}</span>
            </div>
            <div class="info-item">
                <span><strong>ğŸ“§ Email:</strong></span>
                <span>{{ user.email or 'NÃ£o configurado' }}</span>
            </div>
            <div class="info-item">
                <span><strong>ğŸ”” NotificaÃ§Ãµes Email:</strong></span>
                <span class="status-badge {{ 'status-active' if user.email_notifications else 'status-inactive' }}">
                    {{ 'âœ… Ativadas' if user.email_notifications else 'âŒ Desativadas' }}
                </span>
            </div>
        </div>

        <form method="POST">
            <div class="profile-section">
                <h3>ğŸ“§ ConfiguraÃ§Ãµes de Email</h3>
                
                <div class="email-info">
                    <h4>ğŸŒŸ Por que configurar email?</h4>
                    <ul>
                        <li>ğŸ“± Receba notificaÃ§Ãµes mesmo offline</li>
                        <li>â° Lembretes de rotinas no horÃ¡rio certo</li>
                        <li>ğŸ“‹ Avisos de tarefas importantes</li>
                        <li>ğŸ’ Templates lindos e personalizados</li>
                    </ul>
                </div>

                <div class="form-group">
                    <label for="email" class="form-label">ğŸ“§ Seu Email:</label>
                    <input type="email" 
                           class="form-control" 
                           id="email" 
                           name="email" 
                           value="{{ user.email or '' }}"
                           placeholder="princesa@exemplo.com"
                           maxlength="255">
                    <small class="text-muted">Digite seu email para receber notificaÃ§Ãµes das suas rotinas e tarefas</small>
                </div>

                <div class="form-check">
                    <input type="checkbox" 
                           class="form-check-input" 
                           id="email_notifications" 
                           name="email_notifications" 
                           {{ 'checked' if user.email_notifications else '' }}>
                    <label class="form-check-label" for="email_notifications">
                        <strong>ğŸ”” Receber notificaÃ§Ãµes por email</strong><br>
                        <small class="text-muted">Enviaremos lembretes lindos sobre suas rotinas e tarefas</small>
                    </label>
                </div>
            </div>

            <button type="submit" class="btn-princess">
                ğŸ’¾ Salvar ConfiguraÃ§Ãµes
            </button>
        </form>

        <div class="profile-section" style="margin-top: 40px;">
            <h3>ğŸ› ï¸ InformaÃ§Ãµes TÃ©cnicas</h3>
            <div class="info-item">
                <span><strong>ğŸŒ NotificaÃ§Ãµes Push:</strong></span>
                <span id="push-status">Verificando...</span>
            </div>
            <div class="info-item">
                <span><strong>ğŸ“± Modo PWA:</strong></span>
                <span id="pwa-status">Verificando...</span>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/profile.js') }}"></script>
{% endblock %}